<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nag Kaon Kana Love?</title>

  <link rel="stylesheet" href="./style.css" />

  <!-- Icons: Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <!-- Import map for Three.js -->
  <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.160.0/build/three.module.js"
      }
    }
  </script>
</head>

<body>
  <div id="ui-wrapper">
    <div id="permission-screen">

      <!-- Quick intro tips shown before the camera permission UI -->
      <div class="pre-msg" aria-label="Experience tip">
        <div class="pre-line">
          <i class="fa-solid fa-lightbulb pre-ico" aria-hidden="true"></i>
          <span>TURN YOUR LIGHTS ON</span>
        </div>
        <div class="pre-line sub">
          <i class="fa-solid fa-volume-high pre-ico" aria-hidden="true"></i>
          <span>MAX YOUR VOLUME FOR BETTER EXPERIENCE</span>
        </div>
      </div>

      <h1>HELLO BEAUTIFUL</h1>

      <!-- Permission explanation (shown before starting the experience) -->
      <p class="sweet-msg">
        Welcome to your personal cosmic space.
        <i class="fa-solid fa-stars" aria-hidden="true"></i>
        <br />
        To interact with the stars and transform the nebula using your hands, we need access to your camera.
        Don't worry, your privacy is safe, everything stays right here in your browser.
      </p>

      <!-- Start: triggers camera permission + app boot -->
      <button id="start-btn">
        <i class="fa-solid fa-camera" aria-hidden="true"></i>
        ALLOW CAMERA &amp; BEGIN
      </button>
    </div>

    <!-- Loading states while initializing MediaPipe + Three.js -->
    <div id="loading-screen">
      <div class="loader-ring"></div>
      <div id="load-status">INITIALIZING SYSTEM...</div>
    </div>
  </div>

  <!-- Fullscreen intro overlay before showing the HUD -->
  <div id="cinematic">
    <div class="inner">
      <div class="title">WELCOME TO<br />NEBULA</div>
    </div>
  </div>

  <!-- Tutorial rail: shows the gesture flow -->
  <div id="tutorial-panel" aria-hidden="true">
    <div class="t-title">
      <i class="fa-solid fa-route" aria-hidden="true"></i>
      FLOW
    </div>
    <ul id="step-list"></ul>
  </div>

  <!-- Camera picture-in-picture -->
  <div id="camera-pip" aria-hidden="true">
    <div class="pip-label">
      <i class="fa-solid fa-video" aria-hidden="true"></i>
      CAM
    </div>
    <video id="self-video" autoplay playsinline muted></video>
  </div>

  <!-- Step badge: will also act as the "Steps" toggle on mobile -->
  <div
    id="step-badge"
    role="button"
    tabindex="0"
    aria-controls="tutorial-panel"
    aria-expanded="false"
    aria-label="Show steps"
  >
    STEP 1/5
  </div>

  <!-- Valentine modal -->
  <div id="valentine-modal" aria-hidden="false">
    <div class="card">
      <div class="title">
        <i class="fa-solid fa-heart" aria-hidden="true"></i>
        WILL YOU BE MY VALENTINE?
      </div>

      <div class="sub" id="modal-sub">
        <i class="fa-solid fa-face-smile" aria-hidden="true"></i>
        Be honest... but not too honest
      </div>

      <div class="actions">
        <button id="yes-btn">
          <i class="fa-solid fa-heart" aria-hidden="true"></i>
          YES
        </button>
        <button id="no-btn" type="button">
          <i class="fa-solid fa-xmark" aria-hidden="true"></i>
          NO
        </button>
      </div>

      <div id="no-counter"></div>
    </div>
  </div>

  <img id="cute-gif" alt="pinch gif" />
  <div id="center-toast"></div>

  <div id="charge-bar-container"><div id="charge-bar"></div></div>
  <div id="gesture-hint">Waiting for Hands</div>

  <!-- Background audio -->
  <audio id="nebula-audio" preload="auto" loop></audio>
  <!-- Audio used for the “peace” / valentine moment -->
  <audio id="sweet-audio" preload="auto"></audio>

  <!-- MediaPipe (globals: Hands, Camera) -->
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>

  <!-- App entry -->
  <script type="module" src="./main.js"></script>
</body>
</html>
